---
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";
import Gallery from "../components/Gallery.astro";
import BaseLayout from "./BaseLayout.astro";

export interface Props {
  title: string;
  description: string;
  publishDate: Date;
  updatedDate?: Date;
  photos: Record<string, any>[];
}

const { title, publishDate, updatedDate, photos } = Astro.props;
dayjs.extend(localizedFormat);

const publishDateString = dayjs(publishDate).format("ll");
let updatedDateString;
if (updatedDate) {
  updatedDateString = dayjs(updatedDate).format("ll");
}
---

<BaseLayout sideBarActiveItemID="collections">
  <div class="pb-12 mt-5">
    <div class="text-3xl font-bold mb-1">{title}</div>
    <p class="text-sm text-gray-700">
      Publicado: <span class="text-gray-900">{publishDateString}</span>
    </p>
    {
      updatedDate && (
        <p class="text-sm text-gray-700">
          Actualizado: <span class="text-gray-900">{updatedDateString}</span>
        </p>
      )
    }
    <div class="mb-8 mt-4">
      <slot />
    </div>
    <Gallery photos={photos} />
  </div>
</BaseLayout>
